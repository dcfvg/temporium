digraph {
  label="\n\nTEMPORIUM\nâ€”\n18/03/14 (bv)"
  
  rankdir="LR"
  //nodesep = .9
  
  layout=dot
  
  fontsize=14
  fontname="myriadpro"
  
  node[fontsize=14, fontname="myriadpro", fontcolor=blue, color=blue, shape=house]
  edge[fontsize=10, fontname="monaco", color=blue]
  
  subgraph tempo {
   
    subgraph device {
      
      node[shape=circle, fontsize=10, style="filled", color=blue, fontcolor=white]
      
      P1 P2 P3 P4 V1 M1
      pompe_air
      arduino
      RPi
      nettoyeur
      conduite
      eclairage
      
      
      subgraph sensor{
        node[shape=invhouse]

        EL1 
        EL2
        TEMP
      }
    }
    subgraph organs {
      
      node[shape=hexagon]
    
      subgraph cluster_bioreact {
        label="cultures"
        webcam
        bioreact
        buffer
        milieu_A
        milieu_B
        P1 P2 P3 V1 EL2 EL1
        pompe_air
        eclairage
      }

      
      subgraph cluster_aquarium {
      
        label="aquarium"
        
        vitre
        volet
        liquide
        filtration
        M1
        EL3
      }
      buffer
      vidange
    }
    

    // RELATIONS
    
    subgraph orders {
      edge[color=red, fontcolor=blue]
      
      conduite -> RPi [label=" event OSC"]
      RPi -> arduino [label=" serial"]
      arduino  -> nettoyeur
      arduino -> {P1, P2, P3, V1, M1, eclairage} [label=" pin io"]
      
      EL1 -> arduino      [label=" !ARU"]
      EL2 -> arduino      [label=" !ARU"]
      EL3 -> arduino      [label=" !ARU"]
      
    }
    subgraph contact {
      
      edge[style=tapered, arrowtail=none, arrowhead=none, penwidth=10, color=grey]
      EL1 -> milieu_A
      EL2 -> milieu_B
      EL3 -> liquide 
    }
    subgraph fluid {
      
      edge[penwidth=5]
      bioreact -> V1 -> buffer ->  P1 -> liquide
      milieu_A -> P2 -> bioreact
      milieu_B -> P3 -> buffer
      liquide -> vidange
      pompe_air -> bioreact
      filtration -> liquide -> filtration
      webcam -> { bioreact }
      milieu_B -> P4 -> liquide
    }
    
    nettoyeur -> vitre
    M1 -> volet
    RPi -> monitoring 
    
	}

}