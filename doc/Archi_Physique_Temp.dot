	digraph {
	 label="\n\nGESTION DU VIVANT / SYSTEME PHYSIQUE\n— \n23/03/14  / P = pompe, PIPE = échangeur, EL = Electrode"
	 
	 rankdir="TP"
	 nodesep = .4
	
	layout=dot
	 
	 fontsize=14
	 fontname="myriadpro"
	 
	 node[fontsize=14, fontname="myriadpro", fontcolor=blue, color=blue, shape=house]
	 edge[fontsize=10, fontname="monaco", color=green]
	
	subgraph organs {
	     
		node[height = 2, width = 1, shape=box, color=mediumspringgreen, fontcolor=darkgreen, penwidth=3]
			
	    milieu_B
	 	milieu_A
	       
	  	bioreacteur_1
	 	bioreacteur_2
	  	bioreacteur_3
	       
		buffer_1
		buffer_2
		buffer_3
		
		
		stockage
		
		filtrage
		
		node[height = 2, width = 6, shape=box, color=mediumspringgreen, fontcolor=darkgreen, penwidth=3]
		aquarium 
		
		subgraph cluster_culture {
	 		label="MILIEUX DE CULTURES"
	 		
	 		
	 		milieu_B
	 		milieu_A
	 	}
	 	
	 	subgraph cluster_aquarium {
	 		label="AQUARIUM"
	 		node[height = 2, width = 1]
	 		
	 		aquarium
	 	}
	}
	
	subgraph pipe {
	     
		node[width = 4, shape=box, color=mediumspringyellow, fontcolor=darkgreen, penwidth=3]
			
	     
	 	label="CULTURES"
	
	 	pipe_biorecteur
	 	pipe_buffer
	 	pipe_aquarium
	 	
	}
	subgraph sensor{
        node[shape=invhouse, fontsize=10, style="filled", color=blue, fontcolor=white]
       
        EL_Bio1 
        EL_Bio2
		EL_Bio3
		
		EL_MA 
        EL_MB
        
        EL_Buf1
        EL_Buf2
        EL_Buf3
        
        EL_Aq
        
      }
      subgraph cluster_Electrode_Bioreacteur {
	 		label="ELECTRODES_BIOREACTEURS\n (nombre/hauteur à definir)"
	 		
	 		EL_Bio1 
       		EL_Bio2
       		EL_Bio3
		
	 	}
	 	
	 	subgraph cluster_Electrode_Milieux {
	 		label="ELECTRODES_MILIEUX_CULTURE"
	 		
	 		EL_MA 
        	EL_MB
        		
	 	}
	 	subgraph cluster_Electrode_Buffer {
	 		label="ELECTRODES_BUFFER\n (nombre/hauteur à definir)"
	 		
	 		EL_Buf1
       		EL_Buf2
        	EL_Buf3
        		
	 	}
	 	subgraph cluster_Electrode_Aquarium {
	 		label="ELECTRODES_AQUARIUM \n (nombre/hauteur à definir)"
	 		
	 		EL_Aq
        		
	 	}
	subgraph device {
	     
	     node[shape=circle, fontsize=5, style="filled", color=blue, fontcolor=white]
	     
	     P_MA_Bio1 
	     P_MA_Bio2 
	     P_MA_Bio3 
	     
	     P_MB_Buf1 
	     P_MB_Buf2 
	     P_MB_Buf3
	     
	     P_MB_Aq
	     
	     P_Bio1_Buf1 
	     P_Bio2_Buf2  
	     P_Bio3_Buf3 
	     
	     P_Buf1_Aq 
	     P_Buf2_Aq
	     P_Buf3_Aq
	     
	     P_Filtrage
	     
	     P_Stockage
	     
	     subgraph cluster_pompes_MA_Bio {
	 		label="POMPES MILIEUX A -> BIOREACTEURS"
	 		
	 		
	 		P_MA_Bio1 
	    	P_MA_Bio2 
	     	P_MA_Bio3 
	 	}
	 	
	 	subgraph cluster_pompes_MB_Buf {
	 		label="POMPES MILIEUX B-> BUFFER"
	 		
	 		P_MB_Buf1 
	     	P_MB_Buf2 
	     	P_MB_Buf3
	     
	    	
	 	}
	 	subgraph cluster_pompes_Buf_Aq {
	 		label="POMPES BUFFER -> AQUARIUM"
	 		
	 		P_Buf1_Aq 
	     	P_Buf2_Aq
	     	P_Buf3_Aq
	     
	    	
	 	}
	 	 subgraph cluster_bloc {
	 		label="BLOC BIOREACTEUR_BUFFER"
	 		
	 		bioreacteur_1
	 		bioreacteur_2
	 		bioreacteur_3
	 		
	 		P_Bio1_Buf1 
	     	P_Bio2_Buf2  
	     	P_Bio3_Buf3 
	     	
	     	buffer_1
	     	buffer_2
	     	buffer_3		
	 		
	 	}
	
	   }
	   
	   	
	   
	   
	
	   // RELATIONS
	   
	  
	subgraph fluid {
		edge[penwidth=3, color=mediumspringgreen]
		
		milieu_A -> pipe_biorecteur
		
		pipe_biorecteur -> {P_MA_Bio1 , P_MA_Bio2, P_MA_Bio3}
		
		P_MA_Bio1 ->  bioreacteur_1
	    P_MA_Bio2 ->  bioreacteur_2
	    P_MA_Bio3 ->  bioreacteur_3
	    
	    bioreacteur_1 -> P_Bio1_Buf1 
	 	bioreacteur_2 -> P_Bio2_Buf2 
	  	bioreacteur_3 -> P_Bio3_Buf3 
	  
	  	P_Bio1_Buf1 -> buffer_1
	  	P_Bio2_Buf2 -> buffer_2
	  	P_Bio3_Buf3 -> buffer_3
	  	
	  	milieu_B -> pipe_buffer
	  	
	  	
	  	pipe_buffer -> {P_MB_Buf1 , P_MB_Buf2, P_MB_Buf3,P_MB_Aq}
	  	
	  	P_MB_Buf1 -> buffer_1
	  	P_MB_Buf2 -> buffer_2
		P_MB_Buf3 -> buffer_3
		
		buffer_1 -> P_Buf1_Aq
		buffer_2 -> P_Buf2_Aq
		buffer_3 -> P_Buf3_Aq
		
		P_Buf1_Aq -> pipe_aquarium
	  	P_Buf2_Aq -> pipe_aquarium
		P_Buf3_Aq -> pipe_aquarium
		P_MB_Aq -> pipe_aquarium
		
		aquarium -> P_Filtrage -> filtrage -> aquarium
		
	   	pipe_aquarium -> aquarium
	   	
	   	aquarium -> P_Stockage -> stockage
	}
	   
	subgraph fluid {
		edge[penwidth=3, color=mediumspringgrey]
		
		EL_Bio1 -> bioreacteur_1
		EL_Bio2 -> bioreacteur_2
		EL_Bio3 -> bioreacteur_3
		
		EL_MA -> milieu_A
		EL_MB -> milieu_B
		
		EL_Buf1 -> buffer_1
       	EL_Buf2 -> buffer_2 
        EL_Buf3 -> buffer_3
        
        EL_Aq -> aquarium
		
	}
	
	milieu_B [label="milieu culture B"]
	milieu_A [label="milieu culture A"]
	
	
	
}
