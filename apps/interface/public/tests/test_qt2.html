<html>
<head>
	<meta charset="utf-8">
	<title></title>
	
	<script src="http://www.apple.com/library/quicktime/scripts/ac_quicktime.js" 
	type="text/JavaScript"></script>

	<script src="http://www.apple.com/library/quicktime/scripts/qtp_library.js" 
	type="text/JavaScript"></script>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body id="" onload="">
	
		<div id="player" class="">
			
		</div>
		<div>
		    <script language="javascript" type="text/javascript">
				var element;
				var $player = $("#player"),
						mov_w = 1280,
						mov_h = 720;
				

				function callback(){
				  console.log("Register Event");

				  var obj = document.qtinstance1;
				  obj.addEventListener('qt_error', event_handler, false);
			    obj.addEventListener('qt_pause', event_handler, false);
			    obj.addEventListener('qt_stalled', event_handler, false);
			    obj.addEventListener('qt_ended', event_handler, false);
			    obj.addEventListener('qt_begin', event_handler, false);
					obj.addEventListener('qt_validated', event_handler, false);
					obj.addEventListener('qt_canplay', event_handler, false);
					obj.addEventListener('qt_canplaythrough', event_handler, false);
			
				};
				function addPlayer(qtsrc, time, container, id){
					
					$player.html(QT_GenerateOBJECTText(
					  qtsrc, mov_w, mov_h, 'sff',
					  'obj#id'  , 'qtinstance1',
					  'emb#NAME',	'qtinstance1' ,
					  'emb#id'  , 'qtinstance1' ,
					  'scale' , 'tofit' , 'AUTOPLAY', 'true', 'CONTROLLER', 'true',
					  'EnableJavaScript', 'True', 'postdomevents', 'True',
						'STARTTIME',time,
					  'qtsrc', qtsrc));
					
						callback();
				}
				function event_handler(ev){
					console.log("Event! " + ev.type);					
				};
					
				addPlayer("test_6canaux.mov", "00:00:00:00", $player);
				// setTimeout(function() {
				// 	document.qtinstance1.Play();
				// }, 1000);
				// setTimeout(function() {
				// 	addPlayer("test_6canaux.mov", "00:00:2:00", $player);
				// }, 5000);
				
				function seekTo(t){
						console.log("seek -> "+ t);
						addPlayer("test_6canaux.mov", "00:00:"+t+":00", $player);						
				}
				
		    </script>
		</div>

		<p>Play and Stop Movie: <br>
		    <a href="javascript:document.qtinstance1.Play();">Play Movie</a><br>
		    <a href="javascript:document.qtinstance1.Stop();">Stop Movie</a><br>
		    <a href="javascript:seekTo(Math.floor((Math.random() * 30) + 1));">Seek Movie</a><br>
		    <a href="javascript:console.log(document.qtinstance1.GetTime());">Get Time</a><br>

			<a href="javascript:document.qtinstance1.SetRate(2.0);"> SetRate(2.0)</a><br>
			<a href="javascript:document.qtinstance1.SetRate(1.0);"> SetRate(1.0)</a><br>
			<a href="javascript:document.qtinstance1.SetTime(75);"> SetTime(75)</a><br>
			<a href="javascript:document.qtinstance1.SetTime(0);"> SetTime(0)</a><br>
	
			<a href="javascript:document.qtinstance1.SetVolume(0);"> SetVolume(0)</a><br>
			<a href="javascript:document.qtinstance1.SetVolume(128);"> SetVolume(128)</a><br>
			<a href="javascript:document.qtinstance1.SetVolume(255);"> SetVolume(255)</a><br>
		</p>
</body>
</html>